"use strict";window.data={ArithmeticSigns:{SEGMENTATION_SIGN:" / ",MULTIPLICATION_SIGN:" * ",SUMMATION_SIGN:" + ",SUBTRACTION_SIGN:" - "},calculator:document.querySelector(".calculator"),isBigNumber:!1,isFirstOperation:!0,isFloat:!1,isLastOperationArithmetic:!1,isLastOperationPercent:!1,isLastOperationMath:!1,isNegative:!1,isNewStep:!0,isResultReceived:!1,FLOAT_PRECISION:11,currentNumber:"",currentArithmeticOperationStr:"",currentResult:"",calculationStrElementsArr:[]},function(){function setBooleansDefault(){window.data.isBigNumber=!1,window.data.isFirstOperation=!0,window.data.isFloat=!1,window.data.isLastOperationArithmetic=!1,window.data.isLastOperationMath=!1,window.data.isLastOperationPercent=!1,window.data.isNegative=!1,window.data.isNewStep=!0,window.data.isResultReceived=!1}function setNextCalculationStep(){window.data.isFirstOperation=!1,window.data.isFloat=!1,window.data.isLastOperationArithmetic=!0,window.data.isLastOperationMath=!1,window.data.isLastOperationPercent=!1,window.data.isNegative=!1,window.data.isNewStep=!0,window.data.isResultReceived=!1}function clearScreen(t){t.value=""}function createStr(t,a){return a?t.join(" "):t.join("")}function getOperationResult(operationStr){return Number(eval(operationStr).toFixed(window.data.FLOAT_PRECISION))}function deleteNegativeSign(){return window.data.currentNumber.slice(1)}window.utils={setBooleansDefault:setBooleansDefault,setNextCalculationStep:setNextCalculationStep,clearScreen:clearScreen,createStr:createStr,getOperationResult:getOperationResult,deleteNegativeSign:deleteNegativeSign}}(),window.math={getMathOperationResult:function(t,a){switch(t){case"percent":return window.data.isLastOperationPercent=!0,function(t){if(window.data.isFirstOperation)return 0;var a=window.data.currentArithmeticOperationStr.split(" ");return a[2]=t,Number(a[0])/100*Number(a[2])}(a);case"square":return i=a,Number((Number(i)*Number(i)).toFixed(window.data.FLOAT_PRECISION));case"root":return e=a,Number(Math.sqrt(Number(e)).toFixed(window.data.FLOAT_PRECISION));case"fraction":return Number(1/Number(a).toFixed(window.data.FLOAT_PRECISION))}var e,i}};var calculator=window.data.calculator,calculationField=calculator.querySelector("#screen_calculation"),numberField=calculator.querySelector("#screen_number"),specialStr="",lastArithmeticOperationStr="";!function(){function a(t){window.data.currentNumber+=t,numberField.value=window.data.currentNumber}function e(t){window.data.currentNumber="",a(t)}function i(){calculationField.value=window.utils.createStr(window.data.calculationStrElementsArr)}function n(t){window.data.calculationStrElementsArr.push(t)}window.calculation={changeCurrentNumber:a,replaceCurrentNumber:e,getArithmeticOperationResult:function(t){window.data.currentResult=window.utils.getOperationResult(t),e(window.data.currentResult)},clearSpecialStrFromCalculation:function(){window.data.calculationStrElementsArr.pop(),i(),specialStr="",window.data.isLastOperationMath=!1,window.data.isLastOperationPercent=!1},changeCalculationStrByArithmetic:function(t,a){window.data.isLastOperationMath||n(Number(a)),n(window.data.ArithmeticSigns[t]),i()},changeNextArithmeticOperation:function(t){window.data.calculationStrElementsArr.pop(),window.data.calculationStrElementsArr.push(window.data.ArithmeticSigns[t]),window.data.currentArithmeticOperationStr=window.data.currentArithmeticOperationStr.slice(0,-3)+window.data.ArithmeticSigns[t],i()},changeCalculationStrByMath:function(t,a){n(specialStr=window.data.isLastOperationPercent?window.data.isFirstOperation?"0":Number(window.data.currentResult).toString():a+"("+Number(t)+")"),i()},repeatLastArithmeticOperation:function(){var t;window.calculation.getArithmeticOperationResult(((t=lastArithmeticOperationStr.split(" "))[0]=window.data.currentResult,lastArithmeticOperationStr=window.utils.createStr(t,!0))),window.data.isFloat=!1,window.data.isNewStep=!0},getCurrentArithmeticOperationResult:function(){window.data.isLastOperationArithmetic?window.data.currentArithmeticOperationStr+=window.data.currentResult:window.data.currentArithmeticOperationStr+=window.data.currentNumber,lastArithmeticOperationStr=window.data.currentArithmeticOperationStr,window.calculation.getArithmeticOperationResult(window.data.currentArithmeticOperationStr),window.utils.clearScreen(calculationField),window.data.currentArithmeticOperationStr="",window.data.calculationStrElementsArr=[]}}}(),function(){var e,i="0",n=11,t=window.data.calculator,a=t.querySelector(".buttons"),r=t.querySelector("#screen_calculation"),o=t.querySelector("#screen_number"),w={SQUARE:"sqr",ROOT:"âˆš",FRACTION:"1/"},d={arithmetic:function(t){var a=t.toUpperCase()+"_SIGN";window.data.isLastOperationArithmetic?window.calculation.changeNextArithmeticOperation(a):(window.data.isFirstOperation?(window.calculation.changeCalculationStrByArithmetic(a,window.data.currentNumber),window.data.currentArithmeticOperationStr+=window.data.currentNumber+window.data.ArithmeticSigns[a],window.data.currentResult=window.data.currentNumber):(window.calculation.changeCalculationStrByArithmetic(a,window.data.currentNumber),window.data.currentArithmeticOperationStr+=window.data.currentNumber,window.calculation.getArithmeticOperationResult(window.data.currentArithmeticOperationStr),window.data.currentArithmeticOperationStr=window.data.currentResult+window.data.ArithmeticSigns[a]),window.utils.setNextCalculationStep())},math:function(t){var a,e=w[t.toUpperCase()];a=window.data.isLastOperationArithmetic?window.data.currentResult:window.data.currentNumber;window.data.isLastOperationMath&&window.calculation.clearSpecialStrFromCalculation();window.data.isLastOperationMath=!0,window.data.currentResult=window.math.getMathOperationResult(t,a),window.calculation.changeCalculationStrByMath(a,e),window.calculation.replaceCurrentNumber(window.data.currentResult),window.data.isLastOperationArithmetic=!1,window.data.isNewStep=!0},segmentation:c,multiplication:c,summation:c,subtraction:c,percent:u,square:u,root:u,fraction:u,reset:function(){window.data.currentArithmeticOperationStr=window.data.currentResult="",window.data.calculationStrElementsArr=[],window.data.isBigNumber&&(o.style.fontSize="");window.calculation.replaceCurrentNumber(i),window.utils.clearScreen(r),window.utils.setBooleansDefault()},clear:function(){window.data.isLastOperationMath&&window.calculation.clearSpecialStrFromCalculation();window.calculation.replaceCurrentNumber(i),window.data.currentResult=i,window.data.isFloat=!1,window.data.isNegative=!1,window.data.isNewStep=!0},delete:function(){var t,a=window.data.currentNumber[window.data.currentNumber.length-1],e=window.data.currentNumber[0];{if(window.data.isNewStep)return;1<window.data.currentNumber.length?("."===a&&(window.data.isFloat=!1),t=window.data.currentNumber.slice(0,-1),window.calculation.replaceCurrentNumber(t),(window.data.currentNumber===i||1===window.data.currentNumber.length&&"-"===e)&&l()):l()}},float:function(){{if(window.data.isFloat)return;if(window.data.isNewStep)window.data.isLastOperationMath&&window.calculation.clearSpecialStrFromCalculation(),window.calculation.replaceCurrentNumber(i),window.data.currentResult=window.data.currentNumber;else if(m())return;window.calculation.changeCurrentNumber("."),window.data.isFloat=!0,window.data.isLastOperationArithmetic=!1,window.data.isNewStep=!1}},negative:function(){{if(window.data.isNewStep)return;window.data.isNegative?(window.data.currentNumber=window.utils.deleteNegativeSign(),window.data.isNegative=!1):(window.data.currentNumber="-"+window.data.currentNumber,window.data.isNegative=!0),window.calculation.replaceCurrentNumber(window.data.currentNumber)}},result:function(){window.data.isResultReceived?window.calculation.repeatLastArithmeticOperation():(window.calculation.getCurrentArithmeticOperationResult(),window.utils.setBooleansDefault(),window.data.isResultReceived=!0)}};function c(t){d.arithmetic(t)}function u(t){d.math(t)}function l(){window.calculation.replaceCurrentNumber(i),window.data.isNegative=!1,window.data.isNewStep=!0}function s(t){var a;isNaN(t)?d[a=t](a):function(t){if((window.data.isLastOperationMath||window.data.isLastOperationPercent)&&window.calculation.clearSpecialStrFromCalculation(),window.data.isLastOperationArithmetic=!1,!m()){if(window.data.isNewStep){if(0===Number(t))return window.calculation.replaceCurrentNumber(i),window.data.currentResult=window.data.currentNumber;window.data.currentNumber="",window.data.isNewStep=!1}window.calculation.changeCurrentNumber(t),window.data.isResultReceived&&(window.data.currentResult=window.data.currentNumber)}}(t),function(){o.value.length>n+1&&(p(parseInt(e,10)-o.value.length+"px"),window.data.isBigNumber=!0);window.data.isBigNumber&&o.value.length<=n&&(p(e),window.data.isBigNumber=!1)}()}function m(){return o.value.length===n&&!window.data.isNewStep}function p(t){o.style.fontSize=t}e=window.getComputedStyle(o,null).getPropertyValue("font-size"),window.utils.clearScreen(r),a.addEventListener("click",function(t){t.preventDefault();var a=t.target.closest(".button");null!==a&&s(a.dataset.type)})}();